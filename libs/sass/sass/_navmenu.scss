%nav-main-with-sub-menu {
	#nav-main {
		// logo
		$logo-sprite-height: logo-sprite-height(ft);
		$logo-sprite-width: logo-sprite-width(ft);
		$logo-border-bottom: round((lines-for-font-size($logo-sprite-height) * $base-line-height) - $logo-sprite-height);
		$logo-border-top: 2 * $base-line-height;
		$logo-full-height: $logo-border-top + $logo-sprite-height + $logo-border-bottom;

		// cavalo
		$cavalo-sprite-height: cavalo-sprite-height(woman);
		$cavalo-sprite-width: cavalo-sprite-width(woman);
		$cavalo-border-bottom: 3 * $base-line-height;
		$cavalo-full-height: (lines-for-font-size($cavalo-sprite-height) * $base-line-height) + $cavalo-border-bottom;

		&::before {
			@include logo-sprite(ft);

			border-bottom-width: $logo-border-bottom;
			border-top-width: $logo-border-top;
		}

		&::after {
			$padding-left: round(($logo-sprite-width - $cavalo-sprite-width) / 2);
			$padding-right: $logo-sprite-width - $cavalo-sprite-width - $padding-left;

			@include cavalo-sprite(woman);

			border-width: 0 $padding-right 0 $padding-left;
			bottom: $cavalo-border-bottom;
		}

		.nav-menu {
			padding-left: 0;
			padding-right: 0;
			top: $logo-full-height;
			width: $logo-sprite-width;

			.menu-item {
				display: none;
			}

			.sub-menu .menu-item {
				display: block;
			}

			.sub-menu,
			.menu-has-submenu::before {
				left: $logo-sprite-width;
			}

			.current-page-ancestor.menu-has-submenu {
				border-bottom-width: 1px;
				display: block;

				&::before {
					margin-top: -$logo-full-height;
				}

				& > a {
					@include hide-text;
					@include opacity(1);

					position: relative;

					&::before {
						@include stretch;

						content: 'Voltar';
						text-align: center;
						text-indent: 0;
					}
				}
			}
		}
	}
}

#nav-main {
	$border-color: #1a1a1a;
	$menu-item-lines: 2;
	$menu-item-border-width: 1px;

	// logo
	$logo-sprite-height: logo-sprite-height(black);
	$logo-sprite-width: logo-sprite-width(black);
	$logo-border-bottom: round((lines-for-font-size($logo-sprite-height) * $base-line-height) - $logo-sprite-height);
	$logo-border-top: 2 * $base-line-height;
	$logo-full-height: $logo-border-top + $logo-sprite-height + $logo-border-bottom;

	// cavalo
	$cavalo-sprite-height: cavalo-sprite-height(menu);
	$cavalo-sprite-width: cavalo-sprite-width(menu);
	$cavalo-border-bottom: 3 * $base-line-height;
	$cavalo-full-height: (lines-for-font-size($cavalo-sprite-height) * $base-line-height) + $cavalo-border-bottom;

	@include stretch-y;
	@include span-columns(3);

	padding-bottom: $cavalo-full-height;
	z-index: 1000;

	&::before {
		@include logo-sprite(black);
		@include stretch-x;

		border: 0 solid $color-black;
		border-bottom-width: $logo-border-bottom;
		border-top-width: $logo-border-top;
		content: '';
		display: block;
		left: 0;
		position: absolute;
		top: 0;
	}

	&::after {
		$padding-left: round(($logo-sprite-width - $cavalo-sprite-width) / 2);
		$padding-right: $logo-sprite-width - $cavalo-sprite-width - $padding-left;

		@include cavalo-sprite(menu);

		border: 0 solid $color-black;
		border-width: 0 $padding-right 0 $padding-left;
		content: '';
		left: 0;
		position: absolute;
		bottom: $cavalo-border-bottom;
	}

	a {
		@include adjust-font-size-to(13px, $menu-item-lines);

		color: $color-white;
		display: block;
		text-align: center;
		text-decoration: none;
		text-transform: uppercase;
	}

	.nav-menu {
		@include box-sizing(border-box);
		@include stretch;

		background-color: $color-black;
		display: block;
		margin: 0;
		padding: rhythm(7) rhythm(1) 0 rhythm(1);
		top: $logo-full-height;
		width: $logo-sprite-width;
	}

	.menu-item {
		border: 0 solid $border-color;
		border-width: $menu-item-border-width 0 0 0;
		margin-top: -$menu-item-border-width;

		&:last-child {
			border-bottom-width: $menu-item-border-width;
		}
	}

	.current-menu-item {
		a {
			@include opacity(0.2);

			color: #e6e6e6;
		}
	}

	.menu-has-submenu {
		&::before,
		.sub-menu {
			display: none;
		}
	}

	.menu-has-submenu {
		.sub-menu,
		&::before,
		&.current-menu-item {
			display: block;
		}
	}

	.sub-menu,
	.menu-has-submenu::before {
		background-color: $color-gray;
		left: $logo-sprite-width;
		position: absolute;
		width: $logo-sprite-width;
	}

	.menu-has-submenu::before {
		@include stretch-y;

		content: '';
		margin-top: -$logo-full-height;
	}

	.sub-menu {
		list-style: none;
		margin: -100% 0 0 0;
		padding: (($menu-item-lines * $base-line-height) - ($base-font-size/2) - $menu-item-border-width) 0 0 0;

		a {
			@include opacity(1);

			color: $color-white;
		}

		.menu-item {
			border-color: #343434;
		}
	}
}

#nav-language {
	position: absolute;
	right: rhythm(1);
	top: rhythm(1);
	z-index: 1000;

	.nav-menu:hover {
		@include clearfix;

		.menu-item {
			@include inline-block;
		}
	}

	.menu-item {
		display: none;
		float: left;

		a {
			@include hide-text;
			@include inline-block;
		}
	}

	.current-menu-item,
	.current-page-ancestor {
		@include inline-block;

		float: right;
	}

	.slug-portugues a {
		@include language-sprite(br);
	}

	.slug-english a {
		@include language-sprite(en);
	}
}

#nav-prev-next {
	text-align: center;
	margin-bottom: 1em;

	.prev, .next {
		cursor: pointer;
		display: inline-block;
		margin: 0 .25em;
	}

	.prev {
		@include seta-sprite(rounded-small-left);
	}

	.next {
		@include seta-sprite(rounded-small-right);
	}
}