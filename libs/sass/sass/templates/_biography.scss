$biography-aside-font-size: 12px;

// EXTENDS ////////////////////////////////////////////////////////////////////

%biography-header {
	@include span-columns(13 omega);
}

%biography-title {
	@include adjust-font-size-to(18px);

	color: $color-black;
	font-weight: bold;
	text-transform: uppercase;
}

%biography-aside-size {
	@include adjust-font-size-to($biography-aside-font-size);
}

%biography-aside-title {
	@extend %biography-aside-size;
	color: #987e51;
	font-weight: bold;
}

%biography-content-columns {
	@include pre(2);
	@include pad(4);
	@include span-columns(8);
}

%biography-content-blockquote {
	@include rhythm(1, 0, 0, 1);

	color: #987e51;

	p {
		@include rhythm(1, 0, 0, 1, 20px);
	}
}

// T BIOGRAPHY ////////////////////////////////////////////////////////////////

body.page-template-t-biography-php {
	background: {
		color: $color-white;
		image: image-url("bg-biography.jpg");
		size: 100% auto;
	}
}

#t-biography {
	$figcaption-font-size: 12px;

	@include margin-leader(21);

	background: {
		attachment: fixed;
		color: $color-white;
		image: image-url("bg-biography-2.jpg");
		position: center center;
		repeat: no-repeat;
		size: cover;
	}
	border-bottom: rhythm(1) solid #9c8358;

	.header,
	.content,
	.extras {
		@include pie-clearfix;
		background-color: $color-white;
	}

	// HEADER ////////////////////////////////////////////////////////////////////

	.header-container {
		@extend .container;
		@include padding-leader(7);
		position: relative;
	}

	.header-content {
		@extend %biography-header;
	}

	.header-title {
		display: none;
	}

	.quote-by-author {
		$color: #846d46;

		@include box-sizing(border-box);
		@include span-columns(5, 16);

		background: $color-black;
		color: $color-white;
		left: columns(3);
		margin: rhythm(13) 0 0 0;
		padding: rhythm(2);
		position: absolute;
		text-align: center;
		text-transform: uppercase;
		top: - rhythm(22);
		z-index: 10;

		&:after {
			$border-width: 1px;

			@include stretch;

			border: $border-width solid #333;
			bottom: 2 * $border-width;
			content: '';
			margin: rhythm(1);
			position: absolute;
		}

		p {
			@include adjust-font-size-to(18px);
			@include rhythm;

			position: relative;
			z-index: 1;

			&:last-child {
				@include adjust-font-size-to(14px);
				color: $color;
			}
		}
	}

	.header-slides {
		@include span-columns(9 omega, 16);

		position: absolute;
		top: - rhythm(15);
		right: 0;

		img {
			height: auto;
			width: 100%;
		}

		figcaption {
			@include adjust-font-size-to($figcaption-font-size);
			@include opacity(0.7);

			text-transform: uppercase;
		}
	}

	.quote-by-others {
		@extend %biography-header;
		@extend %font-quattrocento-sans;
		@include rhythm(0, 0, 0, 3);

		text-align: center;

		p {
			@include adjust-font-size-to(28px);
			@include rhythm;

			color: #987e51;
			line-height: 1.5em;
			padding-left: columns(1, 13);
			padding-right: columns(1, 13);
		}

		.fn {
			font-weight: bold;
		}
	}

	// CONTENT ///////////////////////////////////////////////////////////////////

	.content-container {
		@extend .container;
		@include padding-trailer(2);
	}

	.content-main {
		@extend %biography-content-columns;

		color: #333;
		position: relative;

		h1 {
			@extend %biography-title;
		}

		blockquote {
			@extend %biography-content-blockquote;
			
			p {
				@include adjust-font-size-to(20px);
			}
		}
	}

	.content-main-aside {
		.works {
			@include span-columns(4 omega, 16);

			color: #666;
			left: 0;
			list-style: none;
			position: absolute;
			text-align: right;
			top: 0;
		}

		.work-item {
			@include rhythm(1, 0, 0, 1, $biography-aside-font-size);
			padding-right: 1em;

			&::before {
				@extend %biography-aside-size;

				content: attr(data-index) ".";
				position: absolute;
				right: 0;
			}
		}

		.work-figure {
			left: 0;
			position: absolute;
			top: 0;

			img {
				width: 100%;
				height: auto;
			}

			&::after {
				@extend %biography-aside-size;

				bottom: 0;
				content: attr(data-index) ".";
				left: 0;
				margin-bottom: -2em;
				position: absolute;
			}
		}

		.work-title,
		.work-specs,
		.work-year {
			margin: 0;
		}

		.work-specs,
		.work-year {
			@extend %biography-aside-size;
		}

		.work-title {
			@extend %biography-aside-title;
		}
	}

	// CONTENT BREAKPOINTS

	$ratios: 0.25 0.5 0.75 1;
	$breakpoints: $media-layout-600 $media-layout-768 $media-layout-992 $media-layout-1382;
	@for $i from 1 through length($ratios) {
		$ratio: nth($ratios, $i);
		$breakpoint: nth($breakpoints, $i);
		$work-figure-margin-ratio: 20px * $ratio;

		$img1-height: image-height("img-biography-work-1.jpg") * $ratio;
		$img1-width: image-width("img-biography-work-1.jpg") * $ratio;
		$img2-width: image-width("img-biography-work-2.jpg") * $ratio;
		$img3-width: image-width("img-biography-work-3.jpg") * $ratio;
		$img4-width: image-width("img-biography-work-4.jpg") * $ratio;

		@include at-breakpoint($breakpoint) {
			.content-main {
				$offset: $img1-height + $work-figure-margin-ratio;
				padding-top: $offset + (4 * $work-figure-margin-ratio);
			}

			.content-main-aside {
				.works {
					$offset: $img1-height + $work-figure-margin-ratio + (image-height("img-biography-work-4.jpg") * $ratio);
					padding-top: $offset + (4 * $work-figure-margin-ratio);
				}

				.work-figure-1 {
					width: $img1-width;
				}

				.work-figure-2 {
					left: $work-figure-margin-ratio + $img1-width;
					width: $img2-width;
				}

				.work-figure-3 {
					left: $work-figure-margin-ratio + $img1-width + $work-figure-margin-ratio + $img2-width;
					width: $img3-width;
				}

				.work-figure-4 {
					left: $img1-width;
					margin-left: - $img4-width;
					top: $work-figure-margin-ratio + $img1-height;
					width: $img4-width;
				}
			}
		}
	}

	// EXTRAS ////////////////////////////////////////////////////////////////////

	.extras {
		@include margin-leader(24);
		@include padding-trailer(2);

		&::before {
			@include adjust-font-size-to($figcaption-font-size);
			@include opacity(0.7);
			@include padding-trailer(3);
			@include pre(6);
			@include span-columns(8);

			content: 'Photo: Antônio Augusto Fontes';
			display: block;
			text-transform: uppercase;
		}

		.top-page-slug-pt_br &::before {
			content: 'Foto: Antônio Augusto Fontes';
		}

		a {
			color: $color-cyan;
			text-decoration: none;

			&:hover {
				text-decoration: underline;
			}
		}
	}

	.extra-quotes {
		@include pre(6);
		@include span-columns(8);

		footer {
			color: $color-black;
		}

		.fn {
			font-weight: bold;
		}
	}

	.extra-quotes-title {
		@extend %biography-title;
	}

	.extra-quote {
		@extend %biography-content-blockquote;
		@include trailer(2);

		margin: {
			left: 0;
			right: 0;
		}
	}

	.extra-quote-content {
	}

	// REINADO ///////////////////////////////////////////////////////////////////

	.reinado {
		@extend %biography-content-columns;
	}

	.reinado-figure {
		@include trailer(2);

		margin-left: - columns(3, 8);
		margin-right: - columns(1, 8);

		img {
			height: auto;
		}
	}

	$widths: image-width("reinado-do-sol-1.jpg") image-width("reinado-do-sol-2.jpg");
	@for $i from 1 through length($widths) {
		$width: nth($widths, $i);

		.reinado-img#{$i} {
			@include at-breakpoint($media-layout-480) {
				width: $width * .25;
			}
			@include at-breakpoint($media-layout-600) {
				width: $width * .40;
			}
			@include at-breakpoint($media-layout-768) {
				width: $width * .55;
			}
			@include at-breakpoint($media-layout-992) {
				width: $width * .70;
			}
			@include at-breakpoint($media-layout-1382) {
				width: $width;
			}
		}
	}

	.reinado-caption-title,
	.reinado-caption-desc {
		margin: 0;
	}

	.reinado-caption-title {
		@extend %biography-aside-title;
	}

	.reinado-caption-desc {
		@extend %biography-aside-size;
	}

	.reinado-title {
		@extend %biography-title;
	}

	// CURRICULUM ////////////////////////////////////////////////////////////////

	.curriculum {
		@extend %biography-content-columns;
	}

	.curriculum-title {
		@extend %biography-title;
	}

	// NAV BIOGRAPHY /////////////////////////////////////////////////////////////

	#nav-biography {
		@extend %biography-content-columns;
		@include leader(1);

		a {
			@include inline-block;

			padding: 1em;
		}

		.nav-biography {
			margin: 0;
			padding: 0;
		}

		.menu-item {
			@include inline-block;

			border: 1px solid #999999;
			list-style: none;
			margin: 0 .5em .5em 0;
		}
	}
}